#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-push hook: Full TypeScript check before pushing
# Last Updated: October 16, 2025
# Purpose: Final safety check before code reaches remote

echo "ğŸš€ Running pre-push checks..."

# Full TypeScript type check
echo "ğŸ“˜ TypeScript type check..."
pnpm typecheck

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ TypeScript type check failed!"
  echo ""
  echo "Fix all TypeScript errors before pushing."
  echo "Run: pnpm typecheck"
  echo ""
  exit 1
fi

# ESLint check
echo "ğŸ”§ ESLint check..."
pnpm lint

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ ESLint check failed!"
  echo ""
  echo "Fix all linting errors before pushing."
  echo "Run: pnpm lint:fix"
  echo ""
  exit 1
fi

echo "âœ… Pre-push checks passed! Safe to push."
